<html>

<head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
    <div id="myDiv"></div>
    <script>
        var data = [
			{
				x: [1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,],
				y: [3.56142458122649e-09,3.82027845148115e-09,3.81519055867828e-09,3.84821853743174e-09,3.83220306185246e-09,3.82040255693777e-09,4.23560425725119e-09,4.22617793070576e-09,6.06409937583794e-09,9.56230395093466e-09,1.65293673976739e-08,3.03399666235271e-08,5.79579052909733e-08,1.12782434166771e-07,2.21259100461862e-07,4.45179281826739e-07,1.12783771027966e-06,2.25578849592297e-06,4.54090046693905e-06,1.20048449409775e-05,2.39679682853457e-05,4.69120146528133e-05,],
				name: 'bs::strcount',
			},
			{
				x: [1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,],
				y: [3.44512807540085e-09,3.70342644304104e-09,4.75478262011041e-09,6.93195626099158e-09,3.70177100859005e-09,3.96529215244826e-09,4.49107629155039e-09,5.55363068503952e-09,7.92152269290542e-09,1.37548402295552e-08,2.54975511886664e-08,5.47595409842033e-08,1.05418842330677e-07,1.95281691969696e-07,3.83292035503036e-07,7.81299934140655e-07,1.8284273740266e-06,3.64333081074948e-06,7.31367109914617e-06,1.51660768187445e-05,3.03673584071794e-05,6.06346200221527e-05,],
				name: 'std::count',
			},
			{
				x: [1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576,32768,49152,65536,98304,131072,196608,262144,393216,524288,786432,1048576,1572864,2097152,],
				y: [2.97480127357563e-09,3.37237922217182e-09,3.34924662515026e-09,3.33809598563472e-09,3.36263866507263e-09,3.34280608234956e-09,3.34364098882137e-09,3.35155771301725e-09,3.37302847798746e-09,3.36116075005039e-09,3.59246621097557e-09,3.5890322224847e-09,4.10794371134061e-09,4.35637925890444e-09,5.38190693256917e-09,6.16959258743628e-09,7.98557658697908e-09,9.77214346743838e-09,1.34508946244978e-08,1.69893112457786e-08,2.42258357990262e-08,3.13990970288933e-08,4.5917246201368e-08,5.99287043985008e-08,9.14642090910272e-08,1.18108928705947e-07,1.70998876874105e-07,2.25588504709012e-07,3.32241576131031e-07,4.6444441683206e-07,8.70045814995376e-07,1.15651368654386e-06,1.7466934632197e-06,2.31887617634287e-06,3.49067775252691e-06,4.85353730997903e-06,8.97318169667053e-06,1.18396509927498e-05,1.79404538797196e-05,2.39557559084888e-05,3.58931783924738e-05,4.78532861763403e-05,],
				name: 'bs::strcount v2 (character)',
				text: 'xor before popcnt in main loop'
			},
			{
				x: [1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576,32768,49152,65536,98304,131072,196608,262144,393216,524288,786432,1048576,1572864,2097152,],
				y: [2.95688862383805e-09,3.35679106303126e-09,3.33313505106308e-09,3.34053395556135e-09,3.33484187397288e-09,3.33243155821801e-09,3.34534952563577e-09,3.33460989064011e-09,3.33597893815289e-09,3.34294065969917e-09,3.59378641885854e-09,3.61012591520169e-09,3.84834524156612e-09,4.1035767315838e-09,5.16390277755699e-09,5.94520112577493e-09,8.26530677234912e-09,9.35875924550691e-09,1.26854043120206e-08,1.60949789375991e-08,2.27276000307022e-08,2.92731341637266e-08,4.26712051186791e-08,5.59864904389763e-08,8.48999944004593e-08,1.11077201571012e-07,1.61818853146149e-07,2.13136944967429e-07,3.17625897565317e-07,4.47689373344436e-07,8.73771276092356e-07,1.16770800188808e-06,1.75256758712974e-06,2.3345472731372e-06,3.48367915781571e-06,5.12622285029199e-06,8.95655993893391e-06,1.19470366474918e-05,1.78850777451596e-05,2.36537170852784e-05,3.54874126163509e-05,4.72759295608594e-05,],
				name: 'bs::strcount v3 (character)',
				text: 'remove xor before popcnt in main loop'
			},
        ];

        var layout = {
            title: { text: 'bs::strcount vs std::count' },
            xaxis: {
				title: 'length',
                type: 'log',
            },
            yaxis: {
                title: 'time per invocation',
                type: 'log',
            }
        };
        Plotly.newPlot('myDiv', data, layout);
    </script>
</body>

</html>